// -*- mode: c++ -*-
/**
 * @file pyExposure.in
 * @author J. Chiang <jchiang@slac.stanford.edu>
 *
 * $Header: /nfs/slac/g/glast/ground/cvs/users/jchiang/pyExposure/src/pyExposure.in,v 1.1.1.1 2006/03/10 05:49:13 jchiang Exp $
 */
%module pyExposure
%{
#include <iostream>
#include <stdexcept>
#include <string>
#include <vector>
#include "evtbin/Gti.h"
#include "dataSubselector/Cuts.h"
#include "dataSubselector/GtiCut.h"
#include "dataSubselector/RangeCut.h"
#include "pyExposure/Exposure.h"
%}
%include stl.i
%exception {
   try {
      $action
   } catch (std::exception & eObj) {
      PyErr_SetString(PyExc_RuntimeError, const_cast<char*>(eObj.what()));
      return NULL;
   }
}
%template(DoubleVector) std::vector<double>;
%template(StringVector) std::vector<std::string>;
%include $(EVTBINROOT)/evtbin/Gti.h
%rename (evtbin_Gti) Gti;
%include $(DATASUBSELECTORROOT)/dataSubselector/CutBase.h
%include $(DATASUBSELECTORROOT)/dataSubselector/Gti.h
%include $(DATASUBSELECTORROOT)/dataSubselector/GtiCut.h
%include $(DATASUBSELECTORROOT)/dataSubselector/RangeCut.h
%include $(DATASUBSELECTORROOT)/dataSubselector/Cuts.h
%template(GtiCutVector) std::vector<dataSubselector::GtiCut *>;
%include $(PYEXPOSUREROOT)/pyExposure/Exposure.h
%extend dataSubselector::Cuts {
   void writeCuts() const {
      self->writeCuts(std::cout);
   }
   std::vector<dataSubselector::GtiCut *> gtiCuts() {
      std::vector<const dataSubselector::GtiCut *> my_gtiCuts;
      self->getGtiCuts(my_gtiCuts);
      std::vector<dataSubselector::GtiCut *> output;
      for (size_t i = 0; i < my_gtiCuts.size(); i++) {
         output.push_back(my_gtiCuts.at(i)->clone());
      }
      return output;
   }
}

